!function(){"use strict";const e=(()=>{const e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];class t{constructor({targetModal:e,triggers:t=[],onShow:o=(()=>{}),onClose:i=(()=>{}),openTrigger:a="data-micromodal-trigger",closeTrigger:n="data-micromodal-close",disableScroll:s=!1,disableFocus:r=!1,awaitCloseAnimation:l=!1,awaitOpenAnimation:c=!1,debugMode:d=!1}){this.modal=document.getElementById(e),this.config={debugMode:d,disableScroll:s,openTrigger:a,closeTrigger:n,onShow:o,onClose:i,awaitCloseAnimation:l,awaitOpenAnimation:c,disableFocus:r},t.length>0&&this.registerTriggers(...t),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}registerTriggers(...e){e.filter(Boolean).forEach(e=>{e.addEventListener("click",e=>this.showModal(e))})}showModal(){if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add("is-open"),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){const e=()=>{this.modal.removeEventListener("animationend",e,!1),this.setFocusToFirstNode()};this.modal.addEventListener("animationend",e,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement)}closeModal(){const e=this.modal;this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",(function t(){e.classList.remove("is-open"),e.removeEventListener("animationend",t,!1)}),!1):e.classList.remove("is-open")}closeModalById(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}scrollBehaviour(e){if(!this.config.disableScroll)return;const t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:"",height:""});break;case"disable":Object.assign(t.style,{overflow:"hidden",height:"100vh"})}}addEventListeners(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}removeEventListeners(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}onClick(e){e.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),e.preventDefault())}onKeydown(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.maintainFocus(e)}getFocusableNodes(){const t=this.modal.querySelectorAll(e);return Array(...t)}setFocusToFirstNode(){if(this.config.disableFocus)return;const e=this.getFocusableNodes();e.length&&e[0].focus()}maintainFocus(e){const t=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){const o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),e.shiftKey||o!==t.length-1||(t[0].focus(),e.preventDefault())}else t[0].focus()}}let o=null;const i=e=>{if(!document.getElementById(e))return console.warn(`MicroModal: ❗Seems like you have missed %c'${e}'`,"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",`<div class="modal" id="${e}"></div>`),!1},a=(e,t)=>{if((e=>{if(e.length<=0)console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')})(e),!t)return!0;for(var o in t)i(o);return!0};return{init:e=>{const i=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=[...document.querySelectorAll(`[${i.openTrigger}]`)],s=((e,t)=>{const o=[];return e.forEach(e=>{const i=e.attributes[t].value;void 0===o[i]&&(o[i]=[]),o[i].push(e)}),o})(n,i.openTrigger);if(!0!==i.debugMode||!1!==a(n,s))for(var r in s){let e=s[r];i.targetModal=r,i.triggers=[...e],o=new t(i)}},show:(e,a)=>{const n=a||{};n.targetModal=e,!0===n.debugMode&&!1===i(e)||(o=new t(n)).showModal()},close:e=>{e?o.closeModalById(e):o.closeModal()}}})();new Vue({el:"#app",data:{loadingMask:!0,api:"https://script.google.com/macros/s/AKfycbycicX5-NDjA6FEbwfauuUSi4NSN4RXbEGSkqPMc3G9JDNA40s/exec",map:null,responseData:[],heatmapData:[],tabType:"confirmed",translate:[{Anhui:"安徽省"},{Beijing:"北京市"},{Chongqing:"重慶市"},{Fujian:"福建省"},{Gansu:"甘肅省"},{Guangdong:"廣東省"},{Guangxi:"廣西壯族自治區"},{Guizhou:"貴州省"},{Hainan:"海南省"},{Hebei:"河北省"},{Heilongjiang:"黑龍江省"},{Henan:"河南省"},{Hubei:"湖北省"},{Hunan:"湖南省"},{"Inner Mongolia":"內蒙古自治區"},{Jiangsu:"江蘇省"},{Jiangxi:"江西省"},{Jilin:"吉林省"},{Liaoning:"遼寧省"},{Ningxia:"寧夏回族自治區"},{Qinghai:"青海省"},{Shaanxi:"陝西省"},{Shandong:"山東省"},{Shanghai:"上海市"},{Shanxi:"山西省"},{Sichuan:"四川省"},{Tianjin:"天津市"},{Tibet:"西藏自治區"},{Xinjiang:"新疆維吾爾自治區"},{Yunnan:"雲南省"},{Zhejiang:"浙江省"},{Thailand:"泰國"},{Japan:"日本"},{"South Korea":"南韓"},{Taiwan:"台灣"},{Washington:"華盛頓"},{Illinois:"伊利諾伊州"},{California:"加利福尼亞"},{Arizona:"亞利桑那州"},{Macau:"澳門"},{"Hong Kong":"香港"},{Singapore:"新加坡"},{Vietnam:"越南"},{France:"法國"},{Nepal:"尼泊爾"},{Malaysia:"馬來西亞"},{Ontario:"安大略"},{"British Columbia":"英屬哥倫比亞"},{"New South Wales":"新南威爾斯州"},{Victoria:"維多利亞"},{Queensland:"昆士蘭州"},{Cambodia:"柬埔寨"},{"Sri Lanka":"斯里蘭卡"},{Germany:"德國"},{Finland:"芬蘭"},{"United Arab Emirates":"阿拉伯聯合大公國"},{Philippines:"菲律賓"},{India:"印度"},{Italy:"義大利"},{UK:"英國"},{Russia:"俄羅斯"},{Sweden:"瑞典"},{Spain:"西班牙"},{"South Australia":"南澳洲"},{"Boston, MA":"波士頓"},{Belgium:"比利時"},{"Madison, WI":"麥迪遜"},{"Cruise Ship":"遊輪"},{"Chicago, IL":"芝加哥"},{"Toronto, ON":"多倫多"},{"Santa Clara, CA":"聖塔克拉拉"},{"San Benito, CA":"聖貝尼托縣"},{"Seattle, WA":"西雅圖"},{"Tempe, AZ":"坦佩"},{"Orange, CA":"橙市"},{"Los Angeles, CA":"洛杉磯"},{"London, ON":"倫敦"}]},methods:{initMap:function(){var e=this;fetch(this.api).then((function(e){return e.json()})).then((function(t){var o=e;e.map=new google.maps.Map(document.getElementById("map"),{center:{lat:30.97564,lng:112.2707},zoom:5,mapTypeId:"roadmap",zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{elementType:"geometry",stylers:[{color:"#263238"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#FFD54F"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#BCAAA4"}]},{featureType:"administrative.neighborhood",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#37474F"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#263238"}]}]});var i=Object.keys(t);var a=[];Array.prototype.forEach.call(i,(function(i){var n,s,r={};r.id=t[i].id,r.state=(n=i,s="",Array.prototype.forEach.call(o.translate,(function(e){var t=Object.keys(e)[0];if(t===n)return s=e[t]})),""!=s?s:n),r.lat=t[i].lat,r.lng=t[i].lng,r.confirmed=t[i].confirmed,r.recovered=t[i].recovered,r.death=t[i].death,a.push(r);var l=new google.maps.LatLng(r.lat,r.lng),c=new google.maps.Marker({position:l,map:e.map}),d=new google.maps.InfoWindow({content:"\n                <h6>".concat(r.state,"</h6>\n                <p>確診：").concat(r.confirmed,"</p>\n                <p>康復：").concat(r.recovered,"</p>\n                <p>死亡：").concat(r.death,"</p>\n              ")});c.addListener("click",(function(t){d.open(e.map,c)}));var h={location:l,weight:r.confirmed};"Hubei"===i&&(h.weight=r.confirmed-1e4),e.heatmapData.push(h)})),e.responseData=a.sort((function(e,t){return e.confirmed>t.confirmed?-1:1})),new google.maps.visualization.HeatmapLayer({data:e.heatmapData,dissipating:!0,radius:40}).setMap(e.map),e.loadingMask=!1}))},showCount:function(e,t,o){return"confirmed"===this.tabType?e:"recovered"===this.tabType?t:"death"===this.tabType?o:void 0},openChartModal:function(t){e.show("chart-model")}},created:function(){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBG9pWjn7gWHoqsNqTrU2EpWfZkyTlh6_I&libraries=visualization",document.head.appendChild(t),t.onload=this.initMap,e.init()}})}();