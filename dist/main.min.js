!function(){"use strict";new Vue({el:"#app",data:{loadingMask:!0,api:"https://script.google.com/macros/s/AKfycbxC425IS9ntTUJ2k1rLzyDhKmj4R5wnyTS4JFaUnysctbQ1mXAO/exec",map:null,responseData:[],heatmapData:[],tabType:"confirmed",chart:{state:"",confirmed:0,recovered:0,death:0},toast:!1,toastLoading:!0,translate:[{Anhui:"安徽省"},{Beijing:"北京市"},{Chongqing:"重慶市"},{Fujian:"福建省"},{Gansu:"甘肅省"},{Guangdong:"廣東省"},{Guangxi:"廣西壯族自治區"},{Guizhou:"貴州省"},{Hainan:"海南省"},{Hebei:"河北省"},{Heilongjiang:"黑龍江省"},{Henan:"河南省"},{Hubei:"湖北省"},{Hunan:"湖南省"},{"Inner Mongolia":"內蒙古自治區"},{Jiangsu:"江蘇省"},{Jiangxi:"江西省"},{Jilin:"吉林省"},{Liaoning:"遼寧省"},{Ningxia:"寧夏回族自治區"},{Qinghai:"青海省"},{Shaanxi:"陝西省"},{Shandong:"山東省"},{Shanghai:"上海市"},{Shanxi:"山西省"},{Sichuan:"四川省"},{Tianjin:"天津市"},{Tibet:"西藏自治區"},{Xinjiang:"新疆維吾爾自治區"},{Yunnan:"雲南省"},{Zhejiang:"浙江省"},{Thailand:"泰國"},{Japan:"日本"},{"South Korea":"南韓"},{Taiwan:"台灣"},{Washington:"華盛頓"},{Illinois:"伊利諾伊州"},{California:"加利福尼亞"},{Arizona:"亞利桑那州"},{Macau:"澳門"},{"Hong Kong":"香港"},{Singapore:"新加坡"},{Vietnam:"越南"},{France:"法國"},{Nepal:"尼泊爾"},{Malaysia:"馬來西亞"},{Ontario:"安大略"},{"British Columbia":"英屬哥倫比亞"},{"New South Wales":"新南威爾斯州"},{Victoria:"維多利亞"},{Queensland:"昆士蘭州"},{Cambodia:"柬埔寨"},{"Sri Lanka":"斯里蘭卡"},{Germany:"德國"},{Finland:"芬蘭"},{"United Arab Emirates":"阿拉伯聯合大公國"},{Philippines:"菲律賓"},{India:"印度"},{Italy:"義大利"},{UK:"英國"},{Russia:"俄羅斯"},{Sweden:"瑞典"},{Spain:"西班牙"},{"South Australia":"南澳洲"},{"Boston, MA":"波士頓"},{Belgium:"比利時"},{"Madison, WI":"麥迪遜"},{"Chicago, IL":"芝加哥"},{"Toronto, ON":"多倫多"},{"Santa Clara, CA":"聖塔克拉拉"},{"San Benito, CA":"聖貝尼托縣"},{"Seattle, WA":"西雅圖"},{"Tempe, AZ":"坦佩"},{"Orange, CA":"橙市"},{"Los Angeles, CA":"洛杉磯"},{"London, ON":"倫敦"},{"Diamond Princess cruise ship":"鑽石公主號"}]},methods:{initMap:function(){var e=this;fetch(this.api).then((function(e){return e.json()})).then((function(t){var a=e;e.map=new google.maps.Map(document.getElementById("map"),{center:{lat:30.97564,lng:112.2707},zoom:5,mapTypeId:"roadmap",zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{elementType:"geometry",stylers:[{color:"#263238"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#FFD54F"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#BCAAA4"}]},{featureType:"administrative.neighborhood",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#37474F"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#263238"}]}]}),console.log(t);for(var n=[],o=t.confirmed,i=t.recovered,r=t.death,s=function(t,s){s=Object.keys(o[0]).length-1;var l,c,p=o[t]["Province/State"].replace("--",", ")||o[t]["Country/Region"].replace("--",", "),m={};m.id=t,m.state=(l=p,c="",Array.prototype.forEach.call(a.translate,(function(e){var t=Object.keys(e)[0];if(t===l)return c=e[t]})),""!=c?c:l),m.lat=o[t].Lat,m.lng=o[t].Long,m.confirmed=Number(o[t][Object.keys(o[0])[s]])||0,m.recovered=Number(i[t][Object.keys(i[0])[s]])||0,m.death=Number(r[t][Object.keys(r[0])[s]])||0,n.push(m);var d=new google.maps.LatLng(m.lat,m.lng),g=new google.maps.Marker({position:d,map:e.map}),y=new google.maps.InfoWindow({content:"\n                <h6>".concat(m.state,"</h6>\n                <p>確診：").concat(m.confirmed,"</p>\n                <p>康復：").concat(m.recovered,"</p>\n                <p>死亡：").concat(m.death,"</p>\n              ")});m.openInfoWindow=function(){y.open(e.map,g)},g.addListener("click",(function(t){y.open(e.map,g)}));var h={location:d,weight:m.confirmed};"Hubei"===o[t]["Province/State"]&&(h.weight=m.confirmed-1e4),e.heatmapData.push(h)},l=0,c=o.length;l<c;l++)s(l,c);e.responseData=n.sort((function(e,t){return e.confirmed>t.confirmed?-1:1})),new google.maps.visualization.HeatmapLayer({data:e.heatmapData,dissipating:!0,radius:40}).setMap(e.map),e.loadingMask=!1}))},showCount:function(e,t,a){return"confirmed"===this.tabType?e:"recovered"===this.tabType?t:"death"===this.tabType?a:void 0},openChartModal:function(e,t,a,n,o){this.chart.state=e,this.chart.confirmed=t,this.chart.recovered=a,this.chart.death=n,google.charts.load("current",{packages:["line"]}),google.charts.setOnLoadCallback((function(){var e=new google.visualization.DataTable;e.addColumn("string",""),e.addColumn("number","確診"),e.addColumn("number","康復"),e.addColumn("number","死亡"),e.addRows(i);new google.charts.Line(document.getElementById("chart_div")).draw(e,google.charts.Line.convertOptions({axes:{x:{0:{side:"bottom"}}},chartArea:{left:20,top:20,width:"100%",height:"90%"},colors:["#2196F3","#4CAF50","#f44336"]}))}));for(var i=[],r=4,s=o[0].length;r<s;r++){var l=[o[0][r].split("T")[0],o[1][r],o[2][r],o[3][r]];i.push(l)}this.toastLoading=!1},moveMapCenter:function(e,t,a){var n=new google.maps.LatLng(e,t);this.map.panTo(n),a.openInfoWindow()}},created:function(){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBG9pWjn7gWHoqsNqTrU2EpWfZkyTlh6_I&libraries=visualization",document.head.appendChild(e),e.onload=this.initMap}})}();